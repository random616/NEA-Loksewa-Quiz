<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Loksewa Preparation - Complete Quiz</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .animate-text {
      background: linear-gradient(to right, #ff416c, #00d2ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .typewriter {
      overflow: hidden;
      border-right: .15em solid orange;
      white-space: nowrap;
      animation: typing 4s steps(30, end), blink-caret .75s step-end infinite;
    }
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: orange; }
    }
  </style>
</head>
<body class="bg-gradient-to-r from-blue-100 to-purple-200 min-h-screen p-6">

  <div class="text-center mb-8">
    <h1 class="text-3xl md:text-4xl font-bold typewriter animate-text mb-2">Welcome Aspirants</h1>
    <p class="text-2xl md:text-3xl italic font-semibold animate-text">Career Capital</p>
  </div>

  <div class="max-w-5xl mx-auto bg-white p-8 rounded-2xl shadow-2xl">
    <h2 class="text-3xl font-bold text-center text-purple-700 mb-6">ЁЯУШ 30 Days Loksewa Quiz</h2>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 mb-6" id="days-container">
      <!-- Days buttons and reset button will be inserted here by JavaScript -->
    </div>

    <div id="quiz-container" class="space-y-6 hidden"></div>
  </div>

  <script>
    const totalDays = 30;
    let unlockedDays = localStorage.getItem('unlockedDays') ? parseInt(localStorage.getItem('unlockedDays')) : 1;
    
    const dayCodes = {
      1: "final",
      2: "texture",
      3: "progress",
      4: "success"
    };

    // ================== DAY 1 QUESTIONS (Nepal Geography) ==================
    const day1Questions = [
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рд╕рдмреИрднрдиреНрджрд╛ рдЕрдЧреНрд▓реЛ рд╣рд┐рдорд╛рд▓ рдХреБрди рд╣реЛ?",
        options: ["рдХрдЮреНрдЪрдирдЬрдВрдШрд╛", "рдорд╛рдЙрдиреНрдЯ рдПрднрд░реЗрд╕реНрдЯ", "рд▓реНрд╣реЛрддреНрд╕реЗ", "рдордирд╛рд╕рд▓реБ"],
        correct: 1
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рдХреБрд▓ рдХреНрд╖реЗрддреНрд░рдлрд▓ рдХрддрд┐ рдЫ?",
        options: ["рез,рекрен,резрезреж рд╡рд░реНрдЧ рдХрд┐рд▓реЛрдорд┐рдЯрд░", "рез,режрем,реорепрез рд╡рд░реНрдЧ рдХрд┐рд▓реЛрдорд┐рдЯрд░", "рез,релрео,релрекрел рд╡рд░реНрдЧ рдХрд┐рд▓реЛрдорд┐рдЯрд░", "рез,реирел,ремрекрек рд╡рд░реНрдЧ рдХрд┐рд▓реЛрдорд┐рдЯрд░"],
        correct: 0
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рд╕рдмреИрднрдиреНрджрд╛ рдареВрд▓реЛ рдирджреА рдХреБрди рд╣реЛ?",
        options: ["рдШрд╛рдБрд╕ рдирджреА", "рдХрд░реНрдгрд╛рд▓реА рдирджреА", "рдЧрдгреНрдбрдХреА рдирджреА", "рдорд╣рд╛рдХрд╛рд▓реА рдирджреА"],
        correct: 1
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рд░рд╛рдЬрдзрд╛рдиреА рдХреБрди рд╢рд╣рд░ рд╣реЛ?",
        options: ["рдкреЛрдЦрд░рд╛", "рдмрд┐рд░рд╛рдЯрдирдЧрд░", "рдХрд╛рдардорд╛рдбреМрдВ", "рд▓рд▓рд┐рддрдкреБрд░"],
        correct: 2
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рд╕рдмреИрднрдиреНрджрд╛ рд▓рд╛рдореЛ рд╕рдбрдХ рдХреБрди рд╣реЛ?",
        options: ["рдиреЗрдкрд╛рд▓-рднрд╛рд░рдд рд╕рдбрдХ", "рдЕрд░реБрдг рд╕рдбрдХ", "рдкреНрд░рд╛рдЪреАрди рджрд░рдмрд╛рд░ рд╕рдбрдХ", "рдкрдерд░ рдХрд╛рдЯреНрдиреЗ рд╕рдбрдХ"],
        correct: 0
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рдЙрддреНрддрд░реА рд╕рд┐рдорд╛ рдХреБрди рджреЗрд╢рд╕рдБрдЧ рдЫ?",
        options: ["рднрд╛рд░рдд", "рдЪреАрди", "рдмрд╛рдВрдЧрд▓рд╛рджреЗрд╢", "рдкрд╛рдХрд┐рд╕реНрддрд╛рди"],
        correct: 1
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХрд╛ рдерд░рд┐рдд рд╣рд┐рдорд╛рд▓рдХреЛ рд╕рдореВрд╣ рдХреБрди рд╣реЛ?",
        options: ["рдХрдЮреНрдЪрдирдЬрдВрдШрд╛ рд░ рд╢рд┐рд╢рд╛рдкрд╛рдЩреНрдЧрдорд╛", "рдЕрдиреНрдирдкреВрд░реНрдг рд░ рдзреМрд▓рд╛рдЧрд┐рд░реА", "рдорд╣рд╛рд▓рд╛рдЩреНрдЧреБрд░ рд░ рдХреБрдореНрднреБ", "рд╣рд┐рдорд╛рд▓рдп рд░ рдХрдирдХрдкреБрд░"],
        correct: 1
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рд╕рдмреИрднрдиреНрджрд╛ рдареВрд▓реЛ рддрд╛рд▓ рдХреБрди рд╣реЛ?",
        options: ["рд░рд╛рд░рд╛ рддрд╛рд▓", "рдлреЗрд╡рд╛ рддрд╛рд▓", "рдЧреЛрд╕рд╛рдЗрдВрдХреБрдгреНрдб", "рдЗрдиреНрджреНрд░рд╕рд╛рд░ рддрд╛рд▓"],
        correct: 0
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рдХреБрд▓ рдЬрдирд╕рдВрдЦреНрдпрд╛ рдХрддрд┐ рдЫ (реирежренрео рдХреЛ рддрдереНрдпрд╛рдЩреНрдХ рдЕрдиреБрд╕рд╛рд░)?",
        options: ["реи рдХрд░реЛрдб рен рд▓рд╛рдЦ", "рей рдХрд░реЛрдб рел рд▓рд╛рдЦ", "рел рдХрд░реЛрдб рей рд▓рд╛рдЦ", "рек рдХрд░реЛрдб рем рд▓рд╛рдЦ"],
        correct: 1
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рдкреНрд░рдореБрдЦ рдХреГрд╖рд┐рдЬрдиреНрдп рдЙрддреНрдкрд╛рджрди рдХреБрди рд╣реЛ?",
        options: ["рдзрд╛рди", "рдордХреИ", "рдЧрд╣реБрдБ", "рдЪрд┐рдпрд╛"],
        correct: 0
      }
    ];

    // ================== DAY 2 QUESTIONS (Nepal History) ==================
    const day2Questions = [
      {
        question: "рдХрд┐рд░рд╛рдБрдд рд╡рдВрд╢рдХреЛ рд╢рд╛рд╕рдирдХрд╛рд▓ рдХрд╣рд┐рд▓реЗрджреЗрдЦрд┐ рдХрд╣рд┐рд▓реЗрд╕рдореНрдо рд░рд╣реНрдпреЛ?",
        options: ["рдЗ.рдкреВ. реорежреж тАУ рдЗ.рд╕рдВ. рейрежреж", "рдЗ.рдкреВ. ренрежреж тАУ рдЗ.рд╕рдВ. резрежреж", "рдЗ.рдкреВ. ремрежреж тАУ рдЗ.рдкреВ. резрежреж", "рдЗ.рдкреВ. ренрежреж тАУ рдЗ.рдкреВ. рейрежреж"],
        correct: 0
      },
      {
        question: "рдкреНрд░рддрд╛рдк рдорд▓реНрд▓рдХреЛ рд╢рд╛рд╕рдирдХрд╛рд▓рдХреЛ рдкреНрд░рдореБрдЦ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рдЙрдкрд▓рдмреНрдзрд┐ рдХреБрди рд╣реЛ?",
        options: ["рдзрд░рд╣рд░рд╛ рдирд┐рд░реНрдорд╛рдг", "рдХрд╛рд╖реНрдардордгреНрдбрдк рдирд┐рд░реНрдорд╛рдг", "рд╣рдиреБрдорд╛рди рдвреЛрдХрд╛ рдкрд░рд┐рд╕рд░рдХреЛ рд╡рд┐рд╕реНрддрд╛рд░", "рдХреГрд╖реНрдг рдордиреНрджрд┐рд░ рдирд┐рд░реНрдорд╛рдг"],
        correct: 2
      },
      {
        question: "рдиреЗрдкрд╛рд▓ рдПрдХреАрдХрд░рдгрдХреЛ рдкреНрд░рдореБрдЦ рдЙрджреНрджреЗрд╢реНрдп рдХреЗ рдерд┐рдпреЛ?",
        options: ["рд╡реНрдпрд╛рдкрд╛рд░ рд╡рд┐рд╕реНрддрд╛рд░ рдЧрд░реНрдиреБ", "рд╕рд╛рдирд╛ рд░рд╛рдЬреНрдпрд╣рд░реВрдорд╛ рд╢рд╛рд╕рди рдЧрд░реНрдиреБ", "рд╡рд┐рджреЗрд╢реА рд╣рд╕реНрддрдХреНрд╖реЗрдк рд░реЛрдХреНрдиреБ", "рдмреГрд╣рддреН рдиреЗрдкрд╛рд▓ рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрдиреБ"],
        correct: 3
      },
      {
        question: "рдкреГрдереНрд╡реАрдирд╛рд░рд╛рдпрдг рд╢рд╛рд╣рд▓реЗ рдиреЗрдкрд╛рд▓ рдПрдХреАрдХрд░рдгрдХреЛ рдЕрднрд┐рдпрд╛рди рдХрд╣рд┐рд▓реЗ рд╕реБрд░реБ рдЧрд░реЗрдХрд╛ рдерд┐рдП?",
        options: ["рд╡рд┐.рд╕рдВ. резренреореп", "рд╡рд┐.рд╕рдВ. резреорежреж", "рд╡рд┐.рд╕рдВ. резреорежрел", "рд╡рд┐.рд╕рдВ. резренрепреп"],
        correct: 3
      },
      {
        question: "рд╕реБрдЧреМрд▓реА рд╕рдиреНрдзрд┐рдкрдЫрд┐ рдиреЗрдкрд╛рд▓рд▓реЗ рдХреБрди рдХреНрд╖реЗрддреНрд░ рдЧреБрдорд╛рдпреЛ?",
        options: ["рд╕рд┐рдХреНрдХрд┐рдо", "рдХреБрдорд╛рдЙрдБтАУрдЧрдврд╝рд╡рд╛рд▓", "рдХрд╛рдардорд╛рдбреМ", "рднреЛрдЬрдкреБрд░"],
        correct: 1
      },
      {
        question: "рд░рд╛рдгрд╛ рд╢рд╛рд╕рдирдХреЛ рд╕реБрд░реБрд╡рд╛рдд рдХрд╕рд░реА рднрдпреЛ?",
        options: ["рдХреЛрдд рдкрд░реНрд╡", "рднрдгреНрдбрд╛рд░рдЦрд╛рд▓ рдкрд░реНрд╡", "рдЕрд▓рдореЛрдбрд╛ рдпреБрджреНрдз", "рд╕реБрдЧреМрд▓реА рд╕рдиреНрдзрд┐"],
        correct: 0
      },
      {
        question: "реирежрежрен рд╕рд╛рд▓рдХреЛ рдкреНрд░рдЬрд╛рддрд╛рдиреНрддреНрд░рд┐рдХ рдЖрдиреНрджреЛрд▓рдирдХреЛ рдореБрдЦреНрдп рдХрд╛рд░рдг рдХреЗ рдерд┐рдпреЛ?",
        options: ["рд░рд╛рдгрд╛рд╡рд┐рд░реБрджреНрдз рдЕрд╕рдиреНрддреЛрд╖", "рд░рд╛рдЬрд╕рдВрд╕реНрдерд╛ рд╕рдорд╛рдкреНрддрд┐", "рд╡рд┐рджреЗрд╢реА рд╣рд╕реНрддрдХреНрд╖реЗрдк", "рдкрд╛рд░реНрдЯреА рд╡рд┐рднрд╛рдЬрди"],
        correct: 0
      },
      {
        question: "рдиреЗрдкрд╛рд▓рдХреЛ рдкрд╣рд┐рд▓реЛ рд╕рдВрд╡рд┐рдзрд╛рди рдХрд╣рд┐рд▓реЗ рдЬрд╛рд░реА рдЧрд░рд┐рдПрдХреЛ рдерд┐рдпреЛ?",
        options: ["рд╡рд┐.рд╕рдВ. реирежрежрек", "рд╡рд┐.рд╕рдВ. реирежрежрен", "рд╡рд┐.рд╕рдВ. реирежрезрел", "рд╡рд┐.рд╕рдВ. реирежрекрен"],
        correct: 2
      },
      {
        question: "рдкрдВрдЪрд╛рдпрддреА рд╡реНрдпрд╡рд╕реНрдерд╛ рдХрд╕рд▓реЗ рд╕реБрд░реБ рдЧрд░реЗрдХрд╛ рдерд┐рдП?",
        options: ["рднреАрдорд╕реЗрди рдерд╛рдкрд╛", "рд░рд╛рдЬрд╛ рдорд╣реЗрдиреНрджреНрд░", "рд░рд╛рдЬрд╛ рддреНрд░рд┐рднреБрд╡рди", "рд░рд╛рдЬрд╛ рд╡реАрд░ рд╡рд┐рдХреНрд░рдо"],
        correct: 1
      },
      {
        question: "реирежремреи/ремрей рдХреЛ рдЬрдирдЖрдиреНрджреЛрд▓рдирдХреЛ рдкреНрд░рдореБрдЦ рдЙрдкрд▓рдмреНрдзрд┐ рдХреЗ рдерд┐рдпреЛ?",
        options: ["рдЧрдгрддрдиреНрддреНрд░ рдШреЛрд╖рдгрд╛", "рдкрдВрдЪayat рдкреБрдирдГ рд╕реНрдерд╛рдкрдирд╛", "рд╕рдВрд╡рд┐рдзрд╛рдирдХреЛ рдЦрд╛рд░реЗрдЬреА", "рдлрд┐рд░реНрддрд╛ рд░рд╛рдЬрддрдиреНрддреНрд░"],
        correct: 0
      }
    ];

    // ================== DAY 3 QUESTIONS (World History) ==================
    const day3Questions = [
      {
        question: "рдлреНрд░рд╛рдиреНрд╕реЗрд▓реА рдХреНрд░рд╛рдиреНрддрд┐ рдХрд╣рд┐рд▓реЗ рд╕реБрд░реБ рднрдПрдХреЛ рдерд┐рдпреЛ?",
        options: ["рд╕рдиреН резренренрем", "рд╕рдиреН резренреореп", "рд╕рдиреН резреорежрек", "рд╕рдиреН резренремрел"],
        correct: 1
      },
      {
        question: "рдкреНрд░рдердо рд╡рд┐рд╢реНрд╡рдпреБрджреНрдз рдХрд╣рд┐рд▓реЗрджреЗрдЦрд┐ рдХрд╣рд┐рд▓реЗрд╕рдореНрдо рдЪрд▓реНрдпреЛ?",
        options: ["рд╕рдиреН резрепрезректАУрезрепрезрео", "рд╕рдиреН резрепреирежтАУрезрепреирек", "рд╕рдиреН резрепрейрептАУрезрепрекрел", "рд╕рдиреН резрепрежрежтАУрезрепрежрел"],
        correct: 0
      },
      {
        question: "рдЬрд░реНрдордиреАрдХрд╛ рд╣рд┐рдЯрд▓рд░ рдХреБрди рд░рд╛рдЬрдиреАрддрд┐рдХ рджрд▓рдХрд╛ рдиреЗрддрд╛ рдерд┐рдП?",
        options: ["рдХрдореНрдпреБрдирд┐рд╕реНрдЯ рдкрд╛рд░реНрдЯреА", "рдлрд╛рд╕рд┐рд╕реНрдЯ рдкрд╛рд░реНрдЯреА", "рдирд╛рдЬреА рдкрд╛рд░реНрдЯреА", "рд▓рд┐рдмрд░рд▓ рдкрд╛рд░реНрдЯреА"],
        correct: 2
      },
      {
        question: "рдХреЛрд▓рдореНрдмрд╕рд▓реЗ рдЕрдореЗрд░рд┐рдХрд╛ рдЦреЛрдЬ рдпрд╛рддреНрд░рд╛ рдХрд╣рд┐рд▓реЗ рд╕реБрд░реБ рдЧрд░реЗрдХрд╛ рдерд┐рдП?",
        options: ["рд╕рдиреН резрекрепреи", "рд╕рдиреН резрекрелрей", "рд╕рдиреН резрелрежреж", "рд╕рдиреН резрелреиреж"],
        correct: 0
      },
      {
        question: "рджреЛрд╕реНрд░реЛ рд╡рд┐рд╢реНрд╡рдпреБрджреНрдзрдХреЛ рдХрд╛рд░рдг рдХреБрди рдШрдЯрдирд╛рд▓реЗ рд▓рд┐рдПрдХреЛ рдорд╛рдирд┐рдиреНрдЫ?",
        options: ["рдЬрд░реНрдордиреАрд▓реЗ рдкреЛрд▓реНрдпрд╛рдиреНрдбрдорд╛рдерд┐ рдЖрдХреНрд░рдордг", "рдЬрд╛рдкрд╛рдирд▓реЗ рдкрд░реНрд▓ рд╣рд╛рд░реНрдмрд░ рдЖрдХреНрд░рдордг", "рдлреНрд░рд╛рдиреНрд╕рдорд╛рдерд┐ рд╣рдорд▓рд╛", "рд╕реЛрднрд┐рдпрдд рд╕рдВрдШрдХреЛ рдмрдо рдкреНрд░рд╣рд╛рд░"],
        correct: 0
      },
      {
        question: "рд░реВрд╕реА рдХреНрд░рд╛рдиреНрддрд┐ рдХрд╣рд┐рд▓реЗ рднрдПрдХреЛ рдерд┐рдпреЛ?",
        options: ["рд╕рдиреН резрепрезрен", "рд╕рдиреН резрепреиреж", "рд╕рдиреН резрепрежрел", "рд╕рдиреН резрепрейреж"],
        correct: 0
      },
      {
        question: "рд╢реАрддрдпреБрджреНрдз рдХреБрди рджреБрдИ рд╢рдХреНрддрд┐рд╣рд░реВрдмреАрдЪ рднрдпреЛ?",
        options: ["рдЕрдореЗрд░рд┐рдХрд╛ рд░ рдЪреАрди", "рдЕрдореЗрд░рд┐рдХрд╛ рд░ рд░реВрд╕ (рд╕реЛрднрд┐рдпрдд рд╕рдВрдШ)", "рдЬрд░реНрдордиреА рд░ рдлреНрд░рд╛рдиреНрд╕", "рдмреЗрд▓рд╛рдпрдд рд░ рдЬрд╛рдкрд╛рди"],
        correct: 1
      },
      {
        question: "рдФрджреНрдпреЛрдЧрд┐рдХ рдХреНрд░рд╛рдиреНрддрд┐ рд╕рдмреИрднрдиреНрджрд╛ рдкрд╣рд┐рд▓рд╛ рдХрд╣рд╛рдБрдмрд╛рдЯ рд╕реБрд░реБ рднрдПрдХреЛ рд╣реЛ?",
        options: ["рдЬрд░реНрдордиреА", "рдЕрдореЗрд░рд┐рдХрд╛", "рдлреНрд░рд╛рдиреНрд╕", "рдмреЗрд▓рд╛рдпрдд"],
        correct: 3
      },
      {
        question: "рд╕рдВрдпреБрдХреНрдд рд░рд╛рд╖реНрдЯреНрд░рд╕рдВрдШ (UN) рдХрд╣рд┐рд▓реЗ рд╕реНрдерд╛рдкрдирд╛ рднрдпреЛ?",
        options: ["рд╕рдиреН резрепрекрел", "рд╕рдиреН резрепрейреп", "рд╕рдиреН резрепрелреж", "рд╕рдиреН резрепрекреж"],
        correct: 0
      },
      {
        question: "рдорд╣рд╛рди рдЪрд┐рдирд┐рдпрд╛рдБ рднрд┐рддреНрддреЛ рдХреБрди рд╡рдВрд╢рдХреЛ рд╕рдордпрдорд╛ рдмрдирд╛рдЗрдПрдХреЛ рд╣реЛ?",
        options: ["рдорд┐рдЩ рд╡рдВрд╢", "рдЪрд┐рдЩ рд╡рдВрд╢", "рдЫрд┐рди (Qin) рд╡рдВрд╢", "рд╣рд╛рди рд╡рдВрд╢"],
        correct: 2
      }
    ];

    function getQuestionsForDay(day) {
      if (day === 1) return [...day1Questions];
      if (day === 2) return [...day2Questions];
      if (day === 3) return [...day3Questions];
      return [];
    }

    function resetProgress() {
      unlockedDays = 1;
      localStorage.setItem('unlockedDays', unlockedDays);
      renderDays();
      alert('Progress reset! Only Day 1 is now unlocked.');
    }

    function renderDays() {
      const container = document.getElementById("days-container");
      const quizContainer = document.getElementById("quiz-container");
      quizContainer.classList.add("hidden");
      container.innerHTML = "";

      for (let i = 1; i <= totalDays; i++) {
        const btn = document.createElement("button");
        btn.textContent = `Day ${i}`;
        btn.className = `py-2 px-4 rounded-xl text-white font-semibold transition shadow-md ${
          i <= unlockedDays ? "bg-purple-600 hover:bg-purple-700" : "bg-gray-400 cursor-not-allowed"
        }`;
        btn.disabled = i > unlockedDays;
        
        if (i <= unlockedDays) {
          btn.onclick = () => handleDayClick(i);
        }
        container.appendChild(btn);
      }

      // Add reset button
      const resetBtn = document.createElement("button");
      resetBtn.textContent = "Reset Progress";
      resetBtn.className = "py-2 px-4 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition shadow-md";
      resetBtn.onclick = resetProgress;
      container.appendChild(resetBtn);
    }

    function handleDayClick(dayNumber) {
      const code = dayCodes[dayNumber];
      if (code) {
        const userInput = prompt(`Enter access code for Day ${dayNumber}:`);
        if (userInput === code) {
          startQuiz(dayNumber);
        } else {
          alert("Incorrect code. Try again.");
        }
      } else {
        startQuiz(dayNumber);
      }
    }

    function startQuiz(dayNumber) {
      const questions = getQuestionsForDay(dayNumber);
      const quizContainer = document.getElementById("quiz-container");
      const daysContainer = document.getElementById("days-container");

      quizContainer.innerHTML = `
        <div class="flex justify-between items-center mb-4">
          <button id="back-btn" class="py-2 px-4 bg-gray-500 text-white rounded-xl hover:bg-gray-600">┬л Back to Days</button>
          <h2 class="text-2xl font-bold text-purple-700">ЁЯУШ Day ${dayNumber} Quiz</h2>
          <div id="timer" class="text-red-600 font-bold">тП│ Time: 45:00</div>
        </div>
      `;
      
      daysContainer.innerHTML = '';
      quizContainer.classList.remove("hidden");

      questions.forEach((q, index) => {
        const div = document.createElement("div");
        div.className = "bg-gray-100 p-4 rounded-xl shadow-md quiz-question";
        
        let optionsHtml = q.options.map((opt, i) => {
          const label = String.fromCharCode(65 + i);
          return `
            <div class="mt-2">
              <label class="inline-flex items-center cursor-pointer">
                <input type="radio" name="q${index}" class="mr-2" data-question-index="${index}" data-answer-index="${i}">
                <span>${label}. ${opt}</span>
              </label>
            </div>`;
        }).join("");

        div.innerHTML = `
          <p class="text-lg font-medium mb-2"><strong>Q${index + 1}:</strong> ${q.question}</p>
          ${optionsHtml}
          <div id="feedback-q${index}" class="mt-2"></div>
        `;
        quizContainer.appendChild(div);
      });

      const submitBtn = document.createElement("button");
      submitBtn.className = "mt-4 py-2 px-4 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition";
      submitBtn.textContent = "Submit";
      
      const scoreDisplay = document.createElement("div");
      scoreDisplay.id = "score-display";
      scoreDisplay.className = "mt-4 p-4 bg-blue-50 rounded-lg";

      submitBtn.onclick = () => submitQuiz(questions, scoreDisplay, dayNumber);
      
      document.getElementById("back-btn").onclick = renderDays;

      quizContainer.appendChild(submitBtn);
      quizContainer.appendChild(scoreDisplay);

      // 45-minute timer (2700 seconds)
      let timeLeft = 2700;
      const timer = document.getElementById("timer");
      const countdown = setInterval(() => {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        timer.textContent = `тП│ Time: ${minutes}:${seconds.toString().padStart(2, '0')}`;
        if (timeLeft-- <= 0) {
          clearInterval(countdown);
          submitQuiz(questions, scoreDisplay, dayNumber);
        }
      }, 1000);
    }

    function submitQuiz(questions, scoreDisplay, dayNumber) {
      let correctAnswers = 0;
      let wrongAnswers = 0;
      let unanswered = 0;
      
      questions.forEach((q, index) => {
        const selectedOption = document.querySelector(`input[name="q${index}"]:checked`);
        const feedbackDiv = document.getElementById(`feedback-q${index}`);
        feedbackDiv.innerHTML = "";

        if (selectedOption) {
          const selectedAnswerIndex = parseInt(selectedOption.getAttribute('data-answer-index'));
          
          if (selectedAnswerIndex === q.correct) {
            correctAnswers++;
            feedbackDiv.innerHTML = `<span class="text-green-500">тЬФ Correct!</span>`;
          } else {
            wrongAnswers++;
            const correctLabel = String.fromCharCode(65 + q.correct);
            feedbackDiv.innerHTML = `
              <span class="text-red-500">тЬЦ Wrong</span>
              <span class="text-green-500 ml-2">(Correct: ${correctLabel}. ${q.options[q.correct]})</span>
            `;
          }
        } else {
          unanswered++;
          const correctLabel = String.fromCharCode(65 + q.correct);
          feedbackDiv.innerHTML = `
            <span class="text-yellow-600">тЪа Not answered</span>
            <span class="text-green-500 ml-2">(Correct: ${correctLabel}. ${q.options[q.correct]})</span>
          `;
        }
      });

      const finalScore = Math.max(0, correctAnswers - (wrongAnswers * 0.2)).toFixed(1);
      if (dayNumber >= unlockedDays && finalScore >= 0) {
        unlockedDays = dayNumber + 1;
        localStorage.setItem('unlockedDays', unlockedDays);
        alert(`Congratulations! Day ${dayNumber + 1} is now unlocked.`);
      }

      const totalQuestions = questions.length;
      const deductedPoints = wrongAnswers * 0.2;
      
      scoreDisplay.innerHTML = `
        <div class="grid grid-cols-3 gap-4 text-center">
          <div class="bg-green-100 p-2 rounded">
            <div class="text-2xl font-bold text-green-700">${correctAnswers}</div>
            <div class="text-sm">Correct</div>
          </div>
          <div class="bg-red-100 p-2 rounded">
            <div class="text-2xl font-bold text-red-700">${wrongAnswers}</div>
            <div class="text-sm">Wrong</div>
          </div>
          <div class="bg-yellow-100 p-2 rounded">
            <div class="text-2xl font-bold text-yellow-700">${unanswered}</div>
            <div class="text-sm">Unanswered</div>
          </div>
        </div>
        <div class="mt-4 text-center">
          <div class="text-lg font-semibold">Score Calculation:</div>
          <div class="text-xl font-bold text-blue-700 mt-2">${finalScore} / ${totalQuestions}</div>
          <div class="text-sm text-gray-600 mt-1">(Correct: ${correctAnswers} - Penalty: ${deductedPoints.toFixed(1)})</div>
          <div class="text-xs text-gray-500 mt-2">*20% penalty per wrong answer</div>
        </div>
      `;
    }

    renderDays();
  </script>
</body>
</html>